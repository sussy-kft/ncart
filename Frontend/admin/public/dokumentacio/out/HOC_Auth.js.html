<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: HOC/Auth.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: HOC/Auth.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";

/**
 * Az Auth egy higher-order component (HOC), ami ellenőrzi, hogy a felhasználó hitelesítve van.
 * Ha a felhasználó hitelesítve van, akkor megjeleníti a megadott komponenst.
 * Ha a felhasználó nincs hitelesítve, akkor átirányítja a felhasználót a bejelentkezési oldalra. (/login)
 *
 * @param {React.Component} Component - Egy komponens, ami hitelesítésre vár mielőt megjelenítjük.
 * @returns {React.Component|null} - Ha sikerült a hitelesítés, akkor visszaadja a komponenst, vagy `null`, ha a hitelesítés nem sikerült.
 */
function Auth(Component) {
  return function AuthComponent(props) {
    const [hitelesitve, setHitelesitve] = useState(false);
    const navigate = useNavigate();

    const kijelentkezes = () => {
      setHitelesitve(false);
      window.localStorage.removeItem("token");
      window.sessionStorage.removeItem("felhasznalo");
      navigate("/login");
    };

    /**
     * useEffect hook to ellenőrzi, hogy a felhasználó rendelkezik érvényes tokennel.
     * Ha rendelkezik valamilyen tokennel, akkor beállítja a hitelesítve állapotot igazra.
     * Ha nem rendelkezik érvényes tokennel, vagy ha eltelik egy óra, akkor eltávolítja a tokent a localStorage-ból, átirányítja a felhasználót a bejelentkezési oldalra, és beállítja a hitelesítve állapotot hamisra.
     */
    useEffect(() => {
      if (localStorage.getItem("token")) {
        setHitelesitve(true);
        setTimeout(kijelentkezes, 3600000);
      } 
        else kijelentkezes();
    }, [navigate]);

    return hitelesitve ? &lt;Component {...props} /> : null;
  };
}

export default Auth;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Admin">Admin</a></li><li><a href="global.html#AlapKomponens">AlapKomponens</a></li><li><a href="global.html#AllomasKartya">AllomasKartya</a></li><li><a href="global.html#Auth">Auth</a></li><li><a href="global.html#AxiosContext">AxiosContext</a></li><li><a href="global.html#AxiosProvider">AxiosProvider</a></li><li><a href="global.html#Bejelentkezes">Bejelentkezes</a></li><li><a href="global.html#DarkModeContext">DarkModeContext</a></li><li><a href="global.html#DarkModeProvider">DarkModeProvider</a></li><li><a href="global.html#DarkModeSwitch">DarkModeSwitch</a></li><li><a href="global.html#Documentacio">Documentacio</a></li><li><a href="global.html#FormMezo">FormMezo</a></li><li><a href="global.html#InfoPanel">InfoPanel</a></li><li><a href="global.html#InfoPanelContext">InfoPanelContext</a></li><li><a href="global.html#InfoPanelProvider">InfoPanelProvider</a></li><li><a href="global.html#InputMezo">InputMezo</a></li><li><a href="global.html#LogoutIcon">LogoutIcon</a></li><li><a href="global.html#Main">Main</a></li><li><a href="global.html#MegalloDnD">MegalloDnD</a></li><li><a href="global.html#MegalloOdlal">MegalloOdlal</a></li><li><a href="global.html#MegalloSzerkeszto">MegalloSzerkeszto</a></li><li><a href="global.html#MegallokProvider">MegallokProvider</a></li><li><a href="global.html#MentesOffcanvas">MentesOffcanvas</a></li><li><a href="global.html#MetaadatContext">MetaadatContext</a></li><li><a href="global.html#MetaadatProvider">MetaadatProvider</a></li><li><a href="global.html#NoPage">NoPage</a></li><li><a href="global.html#PopUpPanel">PopUpPanel</a></li><li><a href="global.html#Providerek">Providerek</a></li><li><a href="global.html#SelectMezo">SelectMezo</a></li><li><a href="global.html#Sor">Sor</a></li><li><a href="global.html#SzerkesztoOldal">SzerkesztoOldal</a></li><li><a href="global.html#SzinkronizaloGomb">SzinkronizaloGomb</a></li><li><a href="global.html#Tabla">Tabla</a></li><li><a href="global.html#UdvozloOldal">UdvozloOldal</a></li><li><a href="global.html#UjAllomas">UjAllomas</a></li><li><a href="global.html#UjVonal">UjVonal</a></li><li><a href="global.html#VonalSzuro">VonalSzuro</a></li><li><a href="global.html#getText">getText</a></li><li><a href="global.html#maxConverter">maxConverter</a></li><li><a href="global.html#minConverter">minConverter</a></li><li><a href="global.html#typeConverter">typeConverter</a></li><li><a href="global.html#utvonalak">utvonalak</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Apr 18 2024 15:30:08 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
